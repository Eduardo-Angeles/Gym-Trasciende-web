---
/**
 * HeroClipped - Hero reutilizable con clip-path en V
 *
 * CARACTERÍSTICAS:
 * - Imagen con clip-path personalizado (clase cp-v)
 * - Overlay oscuro configurable
 * - Contenido centrado vertical y horizontalmente
 * - Altamente personalizable vía props
 *
 * EJEMPLO DE USO:
 *
 * <HeroClipped
 *   img="/hero-image.webp"
 *   alt="Descripción de la imagen"
 *   minHeight="min-h-dvh"
 *   overlayOpacity="50"
 * >
 *   <h1>Tu Título</h1>
 *   <p>Tu contenido...</p>
 * </HeroClipped>
 */

interface Props {
  /** Ruta de la imagen del hero */
  img: string;
  /** Texto alternativo para la imagen (importante para SEO y accesibilidad) */
  alt?: string;
  /** Altura mínima del hero (clase Tailwind) */
  minHeight?: string;
  /** Opacidad del overlay oscuro (0-100, donde 0 = transparente, 100 = negro sólido) */
  overlayOpacity?: string;
  /** Posición del objeto de la imagen (object-position de Tailwind) */
  objectPosition?: string;
  /** Color de fondo para los espacios del clip-path (clase Tailwind bg-*) */
  backgroundColor?: string;
  /** Clases CSS adicionales para el contenedor */
  class?: string;
  /** Nombre para View Transitions */
  transitionName?: string;
}

const {
  img,
  alt = "Hero background",
  minHeight = "min-h-dvh",
  overlayOpacity = "30",
  objectPosition = "object-center",
  backgroundColor = "bg-background",
  class: className = "",
  transitionName,
} = Astro.props;
---

<!-- Contenedor principal: Define el área total del hero -->
<div
  class={`relative w-full max-w-[100vw] overflow-hidden ${backgroundColor} ${minHeight} ${className}`}
>
  <!-- Imagen principal con clip-path -->
  <img
    class={`absolute inset-0 h-full w-full cp-v object-cover ${objectPosition}`}
    src={img}
    alt={alt}
    loading="eager"
    style={transitionName ? `view-transition-name: ${transitionName}` : ""}
  />

  <!-- Overlay oscuro configurable sobre la imagen -->
  <div class={`absolute inset-0 cp-v bg-black/${overlayOpacity}`}></div>

  <!-- Contenido del hero: Centrado vertical y horizontal sobre la imagen -->
  <div
    class={`relative z-10 flex ${minHeight} w-full flex-col items-center justify-center px-4`}
  >
    <slot />
  </div>
</div>
