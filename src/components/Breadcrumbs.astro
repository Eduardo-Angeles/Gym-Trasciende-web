---
/**
 * Breadcrumbs - NavegaciÃ³n de migas de pan para SEO
 * Mejora la experiencia del usuario y el SEO con Schema.org
 */

interface BreadcrumbItem {
  label: string;
  url: string;
}

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className } = Astro.props;

// Schema.org JSON-LD para breadcrumbs
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: items.map((item, index) => ({
    "@type": "ListItem",
    position: index + 1,
    name: item.label,
    item: item.url,
  })),
};
---

<nav aria-label="Breadcrumb" class:list={[className]}>
  <ol
    class="flex flex-wrap items-center gap-2 text-sm"
    itemscope
    itemtype="https://schema.org/BreadcrumbList"
  >
    {
      items.map((item, index) => (
        <li
          class="flex items-center gap-2"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        >
          {index < items.length - 1 ? (
            <>
              <a
                href={item.url}
                class="hover:text-primary text-gray-400 transition-colors"
                itemprop="item"
              >
                <span itemprop="name">{item.label}</span>
              </a>
              <meta itemprop="position" content={String(index + 1)} />
              <svg
                class="h-4 w-4 text-gray-600"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </>
          ) : (
            <>
              <span
                class="text-primary font-semibold"
                itemprop="name"
                aria-current="page"
              >
                {item.label}
              </span>
              <meta itemprop="position" content={String(index + 1)} />
            </>
          )}
        </li>
      ))
    }
  </ol>

  <!-- Schema.org JSON-LD -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify(breadcrumbSchema)}
  />
</nav>
